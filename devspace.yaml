version: v1beta8
images:
  docs:
    image: gcr.io/plaidcloud-build/docs
    build:
      custom:
        command: gcloud
        args:
        - builds
        - submit
        - --project=plaidcloud-build
        # - --machine-type=n1-highcpu-8
        - --tag
deployments:
- name: docs
  helm:
    chart:
      name: ./charts/docs
      version: v0.0.1
    values:
      devMode: true
      docs:
        image: gcr.io/plaidcloud-build/docs
        port: 8000
        pullPolicy: IfNotPresent
        pullSecret: gcr-key
      ingress:
        enabled: true
        annotations:
          kubernetes.io/ingress.class: nginx
        tls: true
        tlsSecret: ingress-cert
dev:
  sync:
  - imageName: gcr.io/plaidcloud-build/docs
    labelSelector:
      plaid: docs
      release: docs
    containerName: "docs"
    localSubPath: ./docs
    containerPath: /tmp/docs
    disableDownload: true
